<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="·ª®ng d·ª•ng qu·∫£n l√Ω job g·ª≠i mail t·ª± ƒë·ªông v·ªõi Chrome profiles" />
    <meta name="keywords" content="email, automation, chrome, gmail, job manager" />
    <meta name="author" content="Mail Job Manager" />
    <title>Qu·∫£n L√Ω Job G·ª≠i Mail T·ª± ƒê·ªông</title>
    <link rel="stylesheet" href="assets/css/main.css" />
  </head>
  <body>
    <main class="app-container" role="main">
      <header>
        <h1 class="app-title">üìß Qu·∫£n L√Ω Job G·ª≠i Mail T·ª± ƒê·ªông</h1>
        <p class="app-subtitle">Qu·∫£n l√Ω v√† t·ª± ƒë·ªông h√≥a vi·ªác g·ª≠i email v·ªõi Chrome profiles</p>
      </header>

      <section class="info-box" role="alert" aria-live="polite">
        <p class="info-box__text">
          <strong>L∆∞u √Ω:</strong> ƒê·ªÉ g·ª≠i mail t·ª± ƒë·ªông, b·∫°n c·∫ßn ch·∫°y script Node.js. 
          Xem file README.md ƒë·ªÉ bi·∫øt h∆∞·ªõng d·∫´n chi ti·∫øt. D·ªØ li·ªáu job ƒë∆∞·ª£c l∆∞u trong PostgreSQL database.
        </p>
      </section>

      <section class="stats" aria-label="Th·ªëng k√™ jobs">
        <article class="stat-card">
          <div class="stat-card__value" id="totalJobs" aria-live="polite">0</div>
          <div class="stat-card__label">T·ªïng Jobs</div>
        </article>
        <article class="stat-card">
          <div class="stat-card__value" id="activeJobs" aria-live="polite">0</div>
          <div class="stat-card__label">Jobs ƒêang Ch·∫°y</div>
        </article>
        <article class="stat-card">
          <div class="stat-card__value" id="pausedJobs" aria-live="polite">0</div>
          <div class="stat-card__label">Jobs ƒê√£ T·∫°m D·ª´ng</div>
        </article>
      </section>

      <section class="controls" aria-label="ƒêi·ªÅu khi·ªÉn">
        <button 
          class="btn btn--primary" 
          onclick="openAddModal()"
          aria-label="Th√™m job m·ªõi"
        >
          ‚ûï Th√™m Job M·ªõi
        </button>
        <button 
          class="btn btn--warning" 
          onclick="exportData()"
          aria-label="Xu·∫•t d·ªØ li·ªáu"
        >
          üì• Xu·∫•t D·ªØ Li·ªáu
        </button>
        <button 
          class="btn btn--success" 
          onclick="importData()"
          aria-label="Nh·∫≠p d·ªØ li·ªáu"
        >
          üì§ Nh·∫≠p D·ªØ Li·ªáu
        </button>
      </section>

      <section class="jobs-grid" id="jobsContainer" aria-label="Danh s√°ch jobs" role="region">
        <!-- Jobs will be rendered here by JavaScript -->
      </section>
    </main>

    <!-- Modal Th√™m/S·ª≠a Job -->
    <div 
      class="modal" 
      id="jobModal" 
      role="dialog" 
      aria-labelledby="modalTitle"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="modal__content">
        <button 
          class="modal__close" 
          id="modalClose"
          onclick="closeModal()"
          aria-label="ƒê√≥ng modal"
        >
          √ó
        </button>
        <h2 class="modal__header" id="modalTitle">Th√™m Job M·ªõi</h2>
        <form id="jobForm" novalidate>
          <div class="form-group">
            <label for="jobName" class="form-group__label">
              T√™n Job <span aria-label="b·∫Øt bu·ªôc">*</span>
            </label>
            <input
              type="text"
              id="jobName"
              name="jobName"
              class="form-group__input"
              required
              placeholder="VD: G·ª≠i mail kh√°ch h√†ng VIP"
              aria-required="true"
            />
          </div>

          <div class="form-group">
            <label for="chromeProfile" class="form-group__label">
              Chrome Profile <span aria-label="b·∫Øt bu·ªôc">*</span>
            </label>
            <div class="form-group__help">
              <div class="form-group__select-wrapper">
                <select 
                  id="chromeProfile" 
                  name="chromeProfile"
                  class="form-group__select"
                  required
                  aria-required="true"
                >
                  <option value="">-- Ch·ªçn ho·∫∑c nh·∫≠p profile --</option>
                </select>
              </div>
              <button
                type="button"
                class="btn btn--primary"
                onclick="loadChromeProfiles()"
                style="white-space: nowrap"
                aria-label="T·∫£i danh s√°ch Chrome profiles"
              >
                üîÑ T·∫£i Profiles
              </button>
            </div>
            <input
              type="text"
              id="chromeProfileCustom"
              name="chromeProfileCustom"
              class="form-group__input"
              placeholder="Ho·∫∑c nh·∫≠p t√™n profile t√πy ch·ªânh"
              style="margin-top: 10px"
              aria-label="Nh·∫≠p t√™n profile t√πy ch·ªânh"
            />
          </div>

          <div class="form-group">
            <label for="emailFrom" class="form-group__label">
              Email G·ª≠i <span aria-label="b·∫Øt bu·ªôc">*</span>
              <small style="display: block; font-weight: normal; color: #6b7280; margin-top: 4px; font-size: 0.875rem;">
                (S·∫Ω t·ª± ƒë·ªông l·∫•y t·ª´ Chrome Profile ƒë√£ ch·ªçn)
              </small>
            </label>
            <input
              type="email"
              id="emailFrom"
              name="emailFrom"
              class="form-group__input"
              required
              placeholder="Ch·ªçn Chrome Profile ƒë·ªÉ t·ª± ƒë·ªông ƒëi·ªÅn email"
              aria-required="true"
            />
          </div>

          <div class="form-group">
            <label for="appPassword" class="form-group__label">
              Gmail App Password <span aria-label="b·∫Øt bu·ªôc">*</span>
              <small style="display: block; font-weight: normal; color: #6b7280; margin-top: 4px; font-size: 0.875rem;">
                <a href="https://myaccount.google.com/apppasswords" target="_blank" style="color: #667eea;">
                  T·∫°o App Password t·∫°i ƒë√¢y
                </a>
                (C·∫ßn b·∫≠t 2-Step Verification tr∆∞·ªõc)
              </small>
              <small id="appPasswordHint" style="display: none; font-weight: normal; color: #10b981; margin-top: 4px; font-size: 0.875rem;">
                üí° ƒê·ªÉ tr·ªëng ƒë·ªÉ gi·ªØ App Password hi·ªán t·∫°i
              </small>
            </label>
            <input
              type="password"
              id="appPassword"
              name="appPassword"
              class="form-group__input"
              required
              placeholder="Nh·∫≠p Gmail App Password (16 k√Ω t·ª±, b·∫Øt bu·ªôc khi t·∫°o m·ªõi)"
              aria-required="true"
              autocomplete="off"
            />
          </div>

          <div class="form-group">
            <label for="emailTo" class="form-group__label">
              Danh S√°ch Email Nh·∫≠n <span aria-label="b·∫Øt bu·ªôc">*</span>
            </label>
            <textarea
              id="emailTo"
              name="emailTo"
              class="form-group__textarea"
              required
              placeholder="Nh·∫≠p email, c√°ch nhau b·ªüi d·∫•u ph·∫©y ho·∫∑c xu·ªëng d√≤ng&#10;VD: abc@gmail.com, xyz@gmail.com"
              aria-required="true"
              rows="4"
            ></textarea>
          </div>

          <div class="form-group">
            <label for="emailSubject" class="form-group__label">
              Ti√™u ƒê·ªÅ Email <span aria-label="b·∫Øt bu·ªôc">*</span>
            </label>
            <input
              type="text"
              id="emailSubject"
              name="emailSubject"
              class="form-group__input"
              required
              placeholder="VD: Th√¥ng b√°o khuy·∫øn m√£i"
              aria-required="true"
            />
          </div>

          <div class="form-group">
            <label for="emailBody" class="form-group__label">
              N·ªôi Dung Email <span aria-label="b·∫Øt bu·ªôc">*</span>
            </label>
            <textarea
              id="emailBody"
              name="emailBody"
              class="form-group__textarea"
              required
              placeholder="Nh·∫≠p n·ªôi dung email..."
              aria-required="true"
              rows="6"
            ></textarea>
          </div>

          <div class="form-group">
            <label for="schedule" class="form-group__label">L·ªãch G·ª≠i</label>
            <select id="schedule" name="schedule" class="form-group__select">
              <option value="manual">G·ª≠i Th·ªß C√¥ng</option>
              <option value="daily">H√†ng Ng√†y</option>
              <option value="weekly">H√†ng Tu·∫ßn</option>
              <option value="monthly">H√†ng Th√°ng</option>
            </select>
          </div>

          <div class="form-group">
            <label for="scheduleTime" class="form-group__label">Th·ªùi Gian G·ª≠i</label>
            <input 
              type="time" 
              id="scheduleTime" 
              name="scheduleTime"
              class="form-group__input"
              value="09:00"
              aria-label="Th·ªùi gian g·ª≠i email"
            />
          </div>

          <div class="form-group">
            <label for="notes" class="form-group__label">Ghi Ch√∫</label>
            <textarea
              id="notes"
              name="notes"
              class="form-group__textarea"
              placeholder="Th√™m ghi ch√∫ v·ªÅ job n√†y..."
              rows="3"
              aria-label="Ghi ch√∫ v·ªÅ job"
            ></textarea>
          </div>

          <div class="form-actions">
            <button 
              type="button" 
              class="btn btn--danger" 
              onclick="closeModal()"
              aria-label="H·ªßy v√† ƒë√≥ng form"
            >
              H·ªßy
            </button>
            <button 
              type="submit" 
              class="btn btn--primary"
              aria-label="L∆∞u job"
            >
              L∆∞u Job
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal Xem Log -->
    <div 
      class="modal" 
      id="logModal" 
      role="dialog" 
      aria-labelledby="logModalTitle"
      aria-modal="true"
      aria-hidden="true"
    >
      <div class="modal__content modal__content--large">
        <button 
          class="modal__close" 
          id="logModalClose"
          onclick="LogModalManager.close()"
          aria-label="ƒê√≥ng modal"
        >
          √ó
        </button>
        <h2 class="modal__header" id="logModalTitle">Log L·∫ßn Ch·∫°y G·∫ßn Nh·∫•t</h2>
        <div id="logModalContent">
          <div class="log-loading">ƒêang t·∫£i...</div>
        </div>
      </div>
    </div>

    <script src="assets/js/app.js"></script>
  </body>
</html>

